steps:
  - label: "Documentation"
    plugins:
      - JuliaCI/julia#v1:
          version: "1"
      - hasura/smooth-checkout#v4.4.1:
          repos:
            - config:
                - url: "https://github.com/SciML/SciMLDocs.git"
                  ref: "${BUILDKITE_COMMIT}"
                  clone_flags: "--depth=1"

    command: |
      git remote set-branches origin 'gh-pages'
      git fetch --depth=1 origin gh-pages
      julia --project -e '
        println("--- :julia: Instantiating project")
        using Pkg
        Pkg.instantiate()
        Pkg.activate("docs")
        Pkg.instantiate()
        push!(LOAD_PATH, @__DIR__)
        println("+++ :julia: Building documentation")
        include("docs/make.jl")'
    agents:
      queue: "juliagpu"
      cuda: "*"
    env:
      DATADEPS_ALWAYS_ACCEPT: true
      JULIA_DEBUG: "Documenter"
    if: build.message !~ /\[skip docs\]/ && !build.pull_request.draft
    timeout_in_minutes: 2000

env:
  JULIA_PKG_SERVER: "" # it often struggles with our large artifacts
  SECRET_DOCUMENTER_KEY: "L69PsInQEyIUkQXmdkGmmU4F6wMxM48YdWmjqtyXgmFkcfkIdZBghyhe4I+/nW+quotZ6V7wTRBsxUuNcjZYcXhzU+VP3kM7ZDUWv/6UtEtVA3J1q38KEVxHelB1Eg8GXxTJXW/LSP/DKESwtRjodYzaQ9ABdmUMD39H88seljL/z5Qp0pJ8wSXIxbSSTgTzS330U5a8VBYIjN0RqYZ5xVIUFCSRQCps80PpTK/On8dVulJrZLzCQBL8egHqPB0EUqkRgAjVHGMFjLzbz7FsILaCCn/LvTZj3OjYQQk8vB47myxBMA0v7Ar+bQ64Zy15MMxdHh/7sdozGp3tx1UOpg==;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"
